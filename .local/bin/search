#!/system/bin/sh
bs=$@
var1=$1
var2=$2
var3=$3
file="/sdcard/Car.txt"
search()
{
	awk -v search1="$bs" '$2~search1 {print $0}' $file
}
case ${1} in
	a1)
	if [[ $(awk -v search1="$var2" '$2~toupper(search1) {print $0}' $file) == "" ]] ; then
		echo $bs | awk '{print toupper("C1"$2 " " $3) " "$4}' >> $file
		echo $bs | awk '{print toupper("C1"$2 " " $3) " "$4}'
		sort -nk 1 -o $file $file
	else
		awk -v search1="$var2" '$2~toupper(search1) {print "TT đã tồn tại: "$0}' $file
	fi
	;;
	a2)
	if [[ $(awk -v search1="$var2" '$2~toupper(search1) {print $0}' $file) == "" ]] ; then
		echo $bs | awk '{print toupper("C2"$2 " " $3) " "$4}' >> $file
		echo $bs | awk '{print toupper("C2"$2 " " $3) " "$4}'
		sort -nk 1 -o $file $file
	else
		awk -v search1="$var2" '$2~toupper(search1) {print "TT đã tồn tại: "$0}' $file
	fi
	;;
	p)
	awk -v l1="$var2" -v l2="$var3" 'NR>=l1&&NR<=l2 {print NR " " $0}' $file
	;;
	d)  awk -v n=$var2 'NR == n {next} {print}' $file > tmpfile && mv tmpfile $file
	;;
	*)  search
	;;
esac
