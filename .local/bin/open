#!/system/bin/sh

launch()
{
	inp_name=$@
	package=$(awk -v search="\\\y$inp_name\\\y" -F"|" '$1!=search && match( $0 , search ) {print $1}' $file)
	su -c am start -n $package --user 0 &> /dev/null
	echo Launching $inp_name
	exit
}

show_suggestions()
{
	app=$(awk -v search="$1" -F"|" ' $1 ~ search {print $1}' $file | echo)
	if [ "$esc_count" == "$a" ]
	then
		esc_count="0"
		exit
	fi
	esc_count="1"
	search $app
}


search()
{
inp_name=$@
len=$(awk -v search="\\\y$inp_name\\\y" -F"|" '/#/{next} $1!=search && match( $0 , search )  {count++} END {print count}' $file)
case $len in

	#case 1
	1) 	launch $inp_name
	;;
	
	#case 3
	*) 	echo "Không Tìm Thấy"
	;;
esac

}
esc_count="0"
a="1"
file=$HOME/.app_list
inp_name=`echo "${@}" | awk '{print tolower($0)}'` 
#search $inp_name
case ${@} in

	#case 1
	list) 	awk -F"|" '{print $2 " " $3 " " $4}' $file | pr -2 -t
	;;
	
	#case 3
	*) 	search $inp_name
	;;
esac